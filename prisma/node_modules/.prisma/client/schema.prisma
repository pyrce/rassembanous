// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Roles{
  id        Int     @id @default(autoincrement())
  role String
  users Users[]
}

model Users{
  id        Int     @id @default(autoincrement())
  nom String
  prenom String
  login String
  password String
  adresse String
  email String
  token String
  role   Roles?   @relation(fields:  [id_role], references: [id])
  id_role Int
  partenaire event_partenaire[] @relation("partenaire")
  mypartenaire partenaire_user[] @relation("mypartenaire")
  user partenaire_user[] @relation("user")
  media media[] @relation("mediauser")
}

model Lieu{
  id        Int     @id @default(autoincrement())
  nomLieu   String
  adresse   String
  events evenements[]
}

model Categories{
  id        Int     @id @default(autoincrement())
  categorie String
  events evenements[]
}

model evenements {
  id              Int           @id @default(autoincrement())
  nom           String
  description         String
  id_lieu Int
  id_categorie Int
  lieu         Lieu?         @relation(fields:  [id_lieu], references: [id])
  categorie    Categories?   @relation(fields:  [id_categorie], references: [id])
  dateDebut DateTime
  dateFin DateTime
  dateLimit DateTime
  nbPlace Int
  prix Int
  isPublic Boolean
  event event_partenaire[] @relation("event")
  media media[] @relation("mediaevent")
}

model event_partenaire{
  id              Int           @id @default(autoincrement())
  id_event Int
  id_partenaire Int
  event         evenements?         @relation("event",fields:  [id_event], references: [id])
  partenaire    Users?   @relation("partenaire",fields:  [id_partenaire], references: [id])
}

model partenaire_user{
  id              Int           @id @default(autoincrement())
  id_partenaire Int
  mypartenaire    Users?   @relation("mypartenaire",fields:  [id_partenaire], references: [id])
  id_user Int
  user    Users?   @relation("user",fields:  [id_user], references: [id])
}

model mediatype{
  id              Int           @id @default(autoincrement())
libelle String
media media[] @relation("mediatype")
}

model media{
  id              Int           @id @default(autoincrement())
image String
id_event Int
id_user Int
id_type Int
user    Users?   @relation("mediauser",fields:  [id_user], references: [id])
event evenements? @relation("mediaevent",fields:  [id_event], references: [id])
typeId mediatype?  @relation("mediatype",fields:  [id_type], references: [id])
}